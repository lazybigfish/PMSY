# 移除 Supabase 依赖 - 任务 1.4 遗漏表补充记录

## 详细分析结果

通过分析所有 51 个 Supabase migration 文件，发现以下遗漏：

### 已创建的表（29张）
1. profiles ✅
2. projects ✅
3. project_members ✅
4. project_modules ✅
5. milestone_templates ✅
6. project_milestones ✅
7. milestone_tasks ✅
8. tasks ✅
9. task_assignees ✅
10. task_progress_updates ✅
11. task_comments ✅
12. suppliers ✅
13. supplier_payment_plans ✅
14. supplier_acceptance_records ✅
15. risks ✅
16. folders ✅
17. files ✅
18. file_operation_logs ✅
19. notifications ✅
20. storage_quotas ✅
21. reports ✅
22. report_templates ✅
23. ai_providers ✅
24. ai_roles ✅
25. ai_analysis_results ✅
26. forum_posts ✅
27. forum_comments ✅
28. forum_likes ✅
29. hot_news ✅
30. app_roles ✅
31. role_permissions ✅

### 遗漏的表（22张）

#### 1. 里程碑相关（2张）
- `milestone_task_templates` - 里程碑任务模板表
- `template_versions` - 模板版本表

#### 2. 任务相关（4张）
- `task_progress_logs` - 任务进度日志表（与 task_progress_updates 不同）
- `task_attachments` - 任务附件表
- `task_modules` - 任务模块关联表
- `task_progress_attachments` - 任务进度附件表

#### 3. 供应商相关（4张）
- `project_suppliers` - 项目供应商关联表
- `supplier_acceptances` - 供应商验收表（与 supplier_acceptance_records 不同）
- `supplier_payments` - 供应商付款记录表
- `construction_records` - 施工记录表
- `progress_adjustments` - 进度调整表

#### 4. 客户相关（3张）
- `clients` - 客户表
- `client_contacts` - 客户联系人表
- `project_clients` - 项目客户关联表

#### 5. 文件相关（2张）
- `file_shares` - 文件分享表
- `storage_configs` - 存储配置表

#### 6. 论坛相关（1张）
- `forum_replies` - 论坛回复表（与 forum_comments 不同）

#### 7. 系统相关（2张）
- `system_configs` - 系统配置表
- `operation_logs` - 操作日志表

#### 8. 热点新闻（1张）
- `news_comments` - 新闻评论表

#### 9. 其他（1张）
- `stakeholders` - 干系人表

## 需要补充的表清单

| 序号 | 表名 | 所属模块 | 优先级 |
|------|------|----------|--------|
| 1 | milestone_task_templates | 里程碑 | 高 |
| 2 | template_versions | 里程碑 | 高 |
| 3 | task_progress_logs | 任务 | 中 |
| 4 | task_attachments | 任务 | 中 |
| 5 | task_modules | 任务 | 低 |
| 6 | task_progress_attachments | 任务 | 低 |
| 7 | project_suppliers | 供应商 | 高 |
| 8 | supplier_acceptances | 供应商 | 高 |
| 9 | supplier_payments | 供应商 | 中 |
| 10 | construction_records | 供应商 | 低 |
| 11 | progress_adjustments | 供应商 | 低 |
| 12 | clients | 客户 | 高 |
| 13 | client_contacts | 客户 | 高 |
| 14 | project_clients | 客户 | 高 |
| 15 | file_shares | 文件 | 中 |
| 16 | storage_configs | 文件 | 中 |
| 17 | forum_replies | 论坛 | 中 |
| 18 | system_configs | 系统 | 高 |
| 19 | operation_logs | 系统 | 中 |
| 20 | news_comments | 热点新闻 | 低 |
| 21 | stakeholders | 干系人 | 高 |

## 建议

由于遗漏的表较多（21张），建议：

1. **优先补充核心表**：milestone_task_templates, template_versions, project_suppliers, supplier_acceptances, clients, client_contacts, project_clients, stakeholders, system_configs

2. **后续补充辅助表**：其他表可以在需要时逐步添加

3. **是否需要补充？** 请确认这些表是否都是必需的，还是部分表可以合并或省略
