# 任务处理人历史记录补充需求

## 需求概述

任务详情的历史记录中，添加和调整处理人的操作没有做记录，需要补充。

## 需求详情

### 问题描述
当前在任务详情页中添加或移除处理人时，任务历史记录中没有相应的记录，用户无法追踪处理人的变更历史。

### 需要记录的操作
1. **添加处理人** - 当为任务添加新的处理人时记录
2. **移除处理人** - 当从任务中移除处理人时记录
3. **批量分配处理人** - 批量操作时也需要记录

### 历史记录格式
- 字段名：`assignees`
- 变更类型：`update`
- 描述格式：
  - 添加：`添加处理人: xxx`
  - 移除：`移除处理人: xxx`

## 涉及场景

1. 任务详情页 - 添加单个处理人
2. 任务详情页 - 移除单个处理人
3. 任务列表页 - 批量分配处理人（追加模式）
4. 任务列表页 - 批量分配处理人（替换模式）

## 相关文件

- `src/pages/tasks/TaskDetailPage.tsx` - 任务详情页
- `src/pages/tasks/TaskList.tsx` - 任务列表页
- `src/services/taskService.ts` - 任务服务
- `api-new/src/routes/rest.ts` - 后端API路由
- `api-new/database/migrations/005_add_task_history.sql` - 数据库触发器

## 验收标准

- [x] 添加处理人时，历史记录中显示"添加处理人: xxx"
- [x] 移除处理人时，历史记录中显示"移除处理人: xxx"
- [x] 批量分配处理人时，正确记录每个变更
- [x] 替换模式时，先记录移除再记录添加
