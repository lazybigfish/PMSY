# 合同金额输入框优化

## 问题描述

合同金额输入框有以下问题：
1. 使用 `type="number"` 会有鼠标滑动调整金额的情况
2. 点击输入框后，框内还有个 `0` 没有被清空

## 修复内容

### 修改文件

`src/pages/projects/tabs/Suppliers.tsx`

### 修改前

```tsx
<input
  type="number"
  className="focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md"
  placeholder="0.00"
  value={addForm.contract_amount}
  onChange={(e) => setAddForm({ ...addForm, contract_amount: parseFloat(e.target.value) })}
/>
```

### 修改后

```tsx
<input
  type="text"
  inputMode="decimal"
  pattern="[0-9]*\.?[0-9]*"
  className="focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md"
  placeholder="0.00"
  value={addForm.contract_amount === 0 ? '' : addForm.contract_amount}
  onFocus={(e) => {
    if (addForm.contract_amount === 0) {
      e.target.select();
    }
  }}
  onChange={(e) => {
    const value = e.target.value;
    // 只允许数字和小数点
    if (value === '' || /^\d*\.?\d*$/.test(value)) {
      setAddForm({ ...addForm, contract_amount: value === '' ? 0 : parseFloat(value) });
    }
  }}
/>
```

## 修复要点

1. **移除鼠标滑动调整**：将 `type="number"` 改为 `type="text"`，同时使用 `inputMode="decimal"` 在移动端显示数字键盘
2. **自动清空 0**：当 `contract_amount` 为 0 时，显示空字符串 `''` 而不是 `0`
3. **聚焦时全选**：当值为 0 时，聚焦输入框自动全选内容，方便用户直接输入
4. **纯数字输入验证**：使用正则表达式 `/^\d*\.?\d*$/` 只允许输入数字和小数点

## 测试验证

1. 进入项目详情页的供应商页面
2. 点击"关联供应商"按钮
3. 合同金额输入框：
   - 不应有鼠标滑动调整金额的功能
   - 点击输入框时，如果值为 0，应显示为空或自动选中
   - 只能输入数字和小数点

## 修复时间

2026-02-16
