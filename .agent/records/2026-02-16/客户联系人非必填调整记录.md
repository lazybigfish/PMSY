# 客户联系人非必填调整记录

## 需求说明
相关方管理中的客户管理，创建客户时，联系人字段从必填调整为非必填。

## 修改内容

### 文件
- `src/pages/stakeholders/ClientFormPage.tsx`

### 具体修改

1. **表单验证逻辑调整**（第114-118行）
   - 原逻辑：要求至少填写一位联系人（姓名和电话同时必填）
   - 新逻辑：联系人完全选填，但如果填写了则需要姓名和电话同时填写

2. **UI 提示调整**（第313行）
   - 原标题：`联系人 （至少填写一位）`
   - 新标题：`联系人 （选填）`

3. **表单标签调整**（第345、357行）
   - 移除姓名和电话字段的红色必填星号标记

## 代码变更详情

```typescript
// 原验证逻辑
const validContacts = formData.contacts.filter(c => c.name.trim() && c.phone?.trim());
if (validContacts.length === 0) {
  alert('请至少添加一位联系人（姓名和电话必填）');
  return;
}

// 新验证逻辑
const validContacts = formData.contacts.filter(c => c.name.trim() || c.phone?.trim());
const hasInvalidContact = validContacts.some(c => !c.name.trim() || !c.phone?.trim());
if (hasInvalidContact) {
  alert('已填写的联系人需要同时填写姓名和电话');
  return;
}
```

## 验证结果
- 前端服务已重启
- 创建客户时可不填写联系人信息
- 如填写联系人，仍需同时填写姓名和电话以确保数据完整性

## 修改时间
2026-02-16
