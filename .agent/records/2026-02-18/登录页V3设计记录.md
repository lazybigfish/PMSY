# 登录页 V3 设计记录

## 日期
2026-02-18

## 需求背景
用户希望设计一个全新的登录页 V3 版本，要求：
- 登录框居中布局（不是左右分栏）
- 保留 PMSY Logo
- 保留"提升团队协作效率 管理每一个精彩项目"标语
- 其他全部重新设计
- 浅蓝色主基调
- 科技感 + 时尚感 + 当下流行设计元素
- 登录页主题改变后，系统左上角 Logo 也要跟随变化

## 设计方案

### 核心理念：「悬浮岛屿」居中布局

不同于 V1/V2 的左右分栏，V3 采用**居中悬浮卡片**布局，配合沉浸式动态背景。

### 布局结构

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│              [Canvas 流体渐变背景]                           │
│              [Canvas 粒子系统]                               │
│                                                             │
│                    ┌─────────────┐                          │
│                    │             │                          │
│                    │  PMSY Logo  │                          │
│                    │  「标语」    │                          │
│                    │             │                          │
│                    │ ┌─────────┐ │                          │
│                    │ │ 用户名  │ │                          │
│                    │ └─────────┘ │                          │
│                    │ ┌─────────┐ │                          │
│                    │ │ 密码    │ │                          │
│                    │ └─────────┘ │                          │
│                    │             │                          │
│                    │ [登录按钮]  │                          │
│                    │             │                          │
│                    └─────────────┘                          │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 配色方案

#### 主色调 - 天蓝色系
| 颜色名称 | 色值 | 用途 |
|---------|------|------|
| 天空蓝 | `#0EA5E9` | 主色、按钮 |
| 青色 | `#22D3EE` | 渐变、光晕 |
| 浅天蓝 | `#7DD3FC` | 高亮 |
| 极浅蓝 | `#E0F2FE` | 背景渐变 |

#### 点缀色
| 颜色名称 | 色值 | 用途 |
|---------|------|------|
| 紫罗兰 | `#8B5CF6` | 点缀、文字渐变 |
| 珊瑚粉 | `#FB7185` | 装饰光晕 |
| 薄荷绿 | `#34D399` | 成功状态 |

### 视觉效果

1. **流体渐变背景**
   - Canvas 绘制 4 个颜色控制点
   - 缓慢流动、融合，类似极光但更柔和
   - 60fps 流畅动画

2. **粒子系统**
   - 30 个粒子缓慢上浮
   - 部分粒子带模糊效果，增加景深
   - 模拟气泡/光尘效果

3. **玻璃拟态卡片**
   - 半透明背景 + backdrop-blur
   - 微妙噪点纹理
   - 柔和光晕阴影

4. **3D 倾斜效果**
   - 鼠标跟随卡片倾斜
   - perspective(1000px) 创造深度感

5. **浮动标签输入框**
   - 聚焦时标签上浮
   - 边框发光效果

### 动画效果

| 元素 | 动画 | 说明 |
|------|------|------|
| 卡片入场 | fade-in + slide-up + scale | 0.8s ease-out-expo |
| Logo | scale + fade | 0.6s spring |
| 标语 | fade-in | 延迟 0.4s |
| 表单 | fade-in + slide-up | 延迟 0.5s |
| 按钮 hover | scale + shadow | 0.3s ease |
| 背景 | 流体流动 | 持续动画 |
| 粒子 | 上浮循环 | 持续动画 |

### 字体选择

- **英文字体**: Plus Jakarta Sans / Inter
- **中文字体**: 思源黑体 / PingFang SC

### 响应式适配

- 桌面端：卡片宽度 480px
- 平板端：卡片宽度 420px
- 移动端：卡片宽度 90%，底部安全区域适配

## 系统 Logo 联动

### 实现方案

1. **创建 ThemeContext**
   - 管理当前主题状态
   - 提供 Logo 样式配置
   - 持久化到 localStorage

2. **Logo 样式配置**

| 主题 | 背景渐变 | 文字渐变 | 阴影 |
|------|---------|---------|------|
| V1 经典版 | 珊瑚橙 `#FF6B4A` | 珊瑚→紫罗兰 | 橙色光晕 |
| V2 科技版 | 天蓝 `#0EA5E9` | 天蓝→紫罗兰 | 蓝色光晕 |
| V3 时尚版 | 青色→紫罗兰 | 青色→紫罗兰 | 青色光晕 |

3. **联动机制**
   - 登录页管理切换主题时，同时更新 ThemeContext
   - Layout 组件使用 useTheme 获取当前 Logo 样式
   - 系统 Logo 实时跟随变化

## 文件清单

### 新增文件
| 文件 | 说明 |
|------|------|
| `src/pages/LoginV3/index.tsx` | V3 登录页组件 |
| `src/context/ThemeContext.tsx` | 主题上下文 |

### 修改文件
| 文件 | 修改内容 |
|------|---------|
| `src/pages/Login.tsx` | 添加 V3 支持 |
| `src/pages/system/tabs/LoginThemeConfig.tsx` | 添加 V3 选项、联动 ThemeContext |
| `src/components/Layout.tsx` | 使用 ThemeContext 动态 Logo |
| `src/App.tsx` | 添加 ThemeProvider |

## 使用流程

1. 登录系统
2. 进入「系统设置」→「登录页管理」
3. 选择「时尚版」(V3) 主题
4. 观察左上角 Logo 实时变化
5. 退出登录查看新登录页效果

## 设计亮点

1. **居中悬浮布局** - 打破传统左右分栏
2. **流体渐变背景** - Canvas 实时渲染
3. **3D 倾斜交互** - 鼠标跟随效果
4. **玻璃拟态卡片** - 现代设计趋势
5. **系统 Logo 联动** - 主题一致性

## 技术栈

- React + TypeScript
- TailwindCSS
- Framer Motion
- Canvas API

## 性能优化

- Canvas 使用 `requestAnimationFrame`
- 动画使用 CSS `transform` 和 `opacity`
- 支持 `prefers-reduced-motion` 媒体查询
- 移动端降级为静态渐变
