# 系统主题适配设计记录

## 日期
2026-02-18

## 需求背景
用户希望系统内的所有组件色调与登录页主题一一对应：
- V1（经典版）→ 珊瑚橙色调
- V2（科技版）→ 深邃紫+青色调
- V3（时尚版）→ 天蓝多彩色调

## 设计方案

### 三个主题配色方案

#### V1 经典版 - 珊瑚橙商务风
```
主色：#FF6B4A（珊瑚橙）
辅助色：#14B890（薄荷绿）
强调色：#8B5CF6（紫罗兰）
背景：#FAFBFC（浅灰白）
文字：#0F172A（深灰）
```

#### V2 科技版 - 深邃紫赛博朋克风
```
主色：#6366F1（深邃紫）
辅助色：#22D3EE（科技青）
强调色：#0EA5E9（天蓝）
背景：#0A0A0F（深邃黑）
文字：#FFFFFF（纯白）
```

#### V3 时尚版 - 天蓝多彩流体风
```
主色：#0EA5E9（天蓝）
辅助色：#14B8A6（青绿）
强调色：#D946EF（紫红）
背景：#F8FAFC（浅灰蓝）
文字：#0F172A（深灰）
```

### 需要主题化的组件

1. 按钮（Button）- 主按钮、次要按钮、危险按钮
2. 卡片/面板（Card）- 默认、悬浮、毛玻璃
3. 输入框（Input）- 文本、密码、选择框
4. 标签/徽章（Badge）- 主色、成功、警告、错误
5. 导航菜单（Nav）- 菜单项、激活状态
6. 表格（Table）- 表头、行、边框
7. 弹窗/模态框（Modal）- 背景、边框、阴影
8. 加载状态（Loading）- 旋转器、骨架屏
9. 提示消息（Alert/Toast）- 成功、错误、警告

### 实现方案

采用 **CSS 变量 + Tailwind 组合** 方案：
1. 通过 CSS 变量实现动态主题切换
2. 结合 Tailwind 的任意值语法
3. 使用 data-theme 属性控制主题
4. V2 主题使用 dark 类名

### 文件结构

```
src/
├── themes/
│   ├── index.ts           # 主题导出
│   ├── v1.ts             # V1 主题配置
│   ├── v2.ts             # V2 主题配置
│   ├── v3.ts             # V3 主题配置
│   └── theme.css         # CSS 变量定义
├── context/
│   └── ThemeContext.tsx   # 主题上下文（增强版）
├── components/
│   └── theme/            # 主题化组件
│       ├── ThemedButton.tsx
│       ├── ThemedCard.tsx
│       ├── ThemedInput.tsx
│       ├── ThemedBadge.tsx
│       ├── ThemedNav.tsx
│       ├── ThemedLoading.tsx
│       ├── ThemedAlert.tsx
│       ├── ThemedModal.tsx
│       ├── ThemedTable.tsx
│       └── index.ts
└── types/
    └── theme.ts          # 主题类型定义
```

### 迁移策略

1. 第一阶段：创建主题系统和基础组件 ✅
2. 第二阶段：页面级迁移（逐个页面替换）
3. 第三阶段：全面替换，删除旧组件

## 实施状态

- [x] 设计方案确认
- [x] 主题类型定义 (src/types/theme.ts)
- [x] V1 主题配置文件 (src/themes/v1.ts)
- [x] V2 主题配置文件 (src/themes/v2.ts)
- [x] V3 主题配置文件 (src/themes/v3.ts)
- [x] 主题索引文件 (src/themes/index.ts)
- [x] ThemeContext 增强 (支持 CSS 变量注入)
- [x] 全局 CSS 变量定义
- [x] 主题化按钮组件 (ThemedButton)
- [x] 主题化卡片组件 (ThemedCard)
- [x] 主题化输入框组件 (ThemedInput)
- [x] 主题化徽章组件 (ThemedBadge)
- [x] 主题化导航组件 (ThemedNav)
- [x] 主题化加载组件 (ThemedLoading - Spinner, Skeleton)
- [x] 主题化提示组件 (ThemedAlert)
- [x] 主题化弹窗组件 (ThemedModal, ThemedConfirmModal)
- [x] 主题化表格组件 (ThemedTable)
- [x] 组件导出索引更新
- [ ] 页面级组件迁移
- [ ] 测试验证

## 已创建文件清单

### 核心文件
| 文件路径 | 说明 |
|---------|------|
| `src/types/theme.ts` | 主题类型定义 (ThemeConfig, ThemeType, LogoStyle) |
| `src/themes/v1.ts` | V1 经典版主题配置 (珊瑚橙) |
| `src/themes/v2.ts` | V2 科技版主题配置 (深邃紫+青色) |
| `src/themes/v3.ts` | V3 时尚版主题配置 (天蓝多彩) |
| `src/themes/index.ts` | 主题导出和 Logo 样式配置 |
| `src/context/ThemeContext.tsx` | 增强版主题上下文 (CSS 变量注入) |

### 组件文件
| 文件路径 | 说明 |
|---------|------|
| `src/components/theme/ThemedButton.tsx` | 主题化按钮组件 (primary/secondary/danger/ghost) |
| `src/components/theme/ThemedCard.tsx` | 主题化卡片组件 (default/elevated/glass) |
| `src/components/theme/ThemedInput.tsx` | 主题化输入框组件 (text/password/textarea/select) |
| `src/components/theme/ThemedBadge.tsx` | 主题化徽章组件 (primary/success/warning/error) |
| `src/components/theme/ThemedNav.tsx` | 主题化导航组件 |
| `src/components/theme/ThemedLoading.tsx` | 主题化加载组件 (Spinner, Skeleton) |
| `src/components/theme/ThemedAlert.tsx` | 主题化提示组件 (success/error/warning/info) |
| `src/components/theme/ThemedModal.tsx` | 主题化弹窗组件 (Modal, ConfirmModal) |
| `src/components/theme/ThemedTable.tsx` | 主题化表格组件 (支持分页) |
| `src/components/theme/index.ts` | 主题组件统一导出 |

### 样式文件
| 文件路径 | 说明 |
|---------|------|
| `src/index.css` | 更新 CSS 变量定义 |

## 组件使用说明

### 1. 切换主题
```typescript
import { useTheme } from './context/ThemeContext';

const { setTheme } = useTheme();
setTheme('v2'); // 切换到科技版
```

### 2. 使用主题化组件
```typescript
import { 
  ThemedButton, 
  ThemedCard, 
  ThemedInput, 
  ThemedBadge,
  ThemedNav,
  ThemedSpinner,
  ThemedAlert,
  ThemedModal,
  ThemedTable 
} from './components/theme';

// 按钮
<ThemedButton variant="primary" size="md">确认</ThemedButton>

// 卡片
<ThemedCard variant="elevated">卡片内容</ThemedCard>

// 输入框
<ThemedInput type="text" label="用户名" placeholder="请输入用户名" />

// 徽章
<ThemedBadge variant="success">已完成</ThemedBadge>

// 导航
<ThemedNav icon={Home} label="首页" isActive />

// 加载
<ThemedSpinner size="md" />
<ThemedSkeleton className="h-20" />

// 提示
<ThemedAlert type="success" message="操作成功" />

// 弹窗
<ThemedModal isOpen={isOpen} onClose={handleClose} title="提示">
  弹窗内容
</ThemedModal>

// 确认弹窗
<ThemedConfirmModal
  isOpen={isOpen}
  onClose={handleClose}
  onConfirm={handleConfirm}
  message="确定要删除吗？"
  type="danger"
/>

// 表格
<ThemedTable
  columns={columns}
  data={data}
  pagination={{ current: 1, pageSize: 10, total: 100, onChange: handlePageChange }}
/>
```

### 3. 在普通组件中使用主题配置
```typescript
import { useTheme } from './context/ThemeContext';

const { themeConfig, isDark } = useTheme();
const { colors, shadows } = themeConfig;

// 使用颜色
<div style={{ color: colors.primary[500] }}>
  主题色文字
</div>
```

## 主题特性对比

| 特性 | V1 经典版 | V2 科技版 | V3 时尚版 |
|-----|----------|----------|----------|
| 主色调 | 珊瑚橙 | 深邃紫+青色 | 天蓝色 |
| 背景风格 | 浅灰白 | 深邃黑/白 | 毛玻璃效果 |
| 按钮样式 | 渐变+阴影 | 发光效果/扁平 | 柔和渐变 |
| 卡片样式 | 圆角+阴影 | 边框发光/简洁 | 毛玻璃+大圆角 |
| 输入框 | 橙色聚焦 | 青色发光聚焦 | 蓝色柔和聚焦 |
| 表格 | 橙色表头 | 深色/科技表头 | 渐变表头 |
| 弹窗 | 圆角阴影 | 发光边框 | 毛玻璃效果 |
| 加载 | 橙色旋转 | 青色发光 | 蓝色渐变 |

## 后续工作

1. 逐步迁移现有页面使用主题化组件
2. 在系统设置中添加主题切换预览功能
3. 添加更多主题化组件（如下拉菜单、时间选择器等）
4. 完善主题切换动画效果
