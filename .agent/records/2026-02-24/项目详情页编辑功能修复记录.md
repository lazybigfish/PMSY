# 项目详情页编辑功能修复记录

## 问题描述

项目详情页的编辑按钮点击后，只能编辑项目名称，无法编辑建设内容、客户名称、项目金额、可见性等字段。

## 问题原因

**ProjectDetail.tsx** 中虽然定义了编辑状态（`isEditing`、`editForm` 等），但在渲染 **ProjectOverview** 组件时**没有传递这些 props**，导致编辑功能无法正常工作。

## 修复方案

在 **ProjectDetail.tsx** 中，将编辑相关的 props 传递给 **ProjectOverview** 组件。

### 修改内容

**文件**: `src/pages/projects/ProjectDetail.tsx`

**修改前**:
```tsx
{activeTab === 'overview' && (
  <ProjectOverview
    projectId={id!}
    canEdit={canEdit}
  />
)}
```

**修改后**:
```tsx
{activeTab === 'overview' && (
  <ProjectOverview
    projectId={id!}
    canEdit={canEdit}
    isEditing={isEditing}
    editForm={editForm}
    onEditChange={setEditForm}
    project={project}
    onClientSelect={setSelectedClientId}
  />
)}
```

## 修复后功能

点击"编辑项目"按钮后，现在可以编辑以下字段：

| 字段 | 编辑方式 |
|------|----------|
| 项目名称 | 输入框（标题区域） |
| 建设内容/描述 | 文本域 |
| 客户名称 | 下拉选择框（关联客户库） |
| 项目金额 | 数字输入框（支持两位小数，显示大写） |
| 可见性 | 复选框（公开/私有） |

## 权限控制

- 只有项目经理（manager）或系统管理员（admin）可以编辑项目
- 普通成员和访客只能查看

## 修复时间

2026-02-24
