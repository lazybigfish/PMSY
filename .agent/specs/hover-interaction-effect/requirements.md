# 系统全局鼠标悬停交互效果 需求规格说明书

## 1. 背景 (Context)

为提升整个 PMSY 系统的用户体验和视觉反馈，需要在全局范围内统一添加鼠标悬停交互效果，让用户清晰感知当前鼠标位置，增强界面的响应感和可操作性，打造专业、精致的系统体验。

## 2. 用户故事 (User Stories)

- **作为** 系统用户，**我想要** 鼠标悬停在任意可交互元素上时有明显的视觉反馈，**以便** 知道我当前聚焦在哪个元素上
- **作为** 系统用户，**我想要** 鼠标悬停在导航菜单上时有交互效果，**以便** 知道该菜单项是可点击的
- **作为** 系统用户，**我想要** 鼠标悬停在卡片/列表项上时有状态变化，**以便** 区分当前查看的内容
- **作为** 系统用户，**我想要** 鼠标悬停在按钮上时有反馈效果，**以便** 确认按钮功能
- **作为** 系统用户，**我想要** 所有悬停效果风格统一，**以便** 获得一致的系统体验

## 3. 验收标准 (Acceptance Criteria - EARS)

### 3.1 全局设计规范

#### 3.1.1 动画参数规范
- **前置条件**: 当系统渲染任意可交互元素时
- **触发器**: 如果鼠标悬停在元素上
- **响应**: 系统应当:
  - 过渡时长统一为 200ms
  - 缓动函数使用 ease-out
  - 优先使用 transform 和 opacity 属性
  - 支持 prefers-reduced-motion 媒体查询

#### 3.1.2 颜色变化规范
- **前置条件**: 当元素需要悬停反馈时
- **触发器**: 如果鼠标悬停在元素上
- **响应**: 系统应当:
  - 背景色变化使用对应色系的 50/100 色阶
  - 文字颜色变化使用对应色系的 600/700 色阶
  - 边框颜色变化使用对应色系的 300/400 色阶

### 3.2 侧边栏导航悬停效果

#### 3.2.1 导航项悬停
- **前置条件**: 当用户查看左侧导航栏时
- **触发器**: 如果鼠标悬停在导航项上
- **响应**: 系统应当:
  - 背景色变为对应主题色的 50 色阶 (如 hover:bg-primary-50)
  - 文字颜色变为对应主题色的 700 色阶
  - 左侧出现 3px 主题色指示条
  - 图标轻微放大 (scale: 1.05)
  - 过渡动画平滑

#### 3.2.2 子菜单项悬停
- **前置条件**: 当用户查看展开的子菜单时
- **触发器**: 如果鼠标悬停在子菜单项上
- **响应**: 系统应当:
  - 背景色变为 gray-50
  - 左侧内边距轻微增加 (pl-4 -> pl-5)
  - 文字颜色加深

### 3.3 卡片组件悬停效果

#### 3.3.1 通用卡片悬停
- **前置条件**: 当用户浏览卡片列表时
- **触发器**: 如果鼠标悬停在卡片上
- **响应**: 系统应当:
  - 卡片轻微上浮 (translateY: -2px)
  - 阴影加深 (shadow-md -> shadow-lg)
  - 边框颜色变为主题色 300
  - 过渡动画平滑

#### 3.3.2 数据卡片悬停 (Dashboard Stats Cards)
- **前置条件**: 当用户查看数据概览卡片时
- **触发器**: 如果鼠标悬停在数据卡片上
- **响应**: 系统应当:
  - 背景色轻微变化
  - 数值文字颜色变为主题色
  - 图标轻微旋转或放大
  - 显示趋势指示器

### 3.4 列表项悬停效果

#### 3.4.1 表格行悬停
- **前置条件**: 当用户浏览数据表格时
- **触发器**: 如果鼠标悬停在表格行上
- **响应**: 系统应当:
  - 背景色变为 gray-50
  - 左侧出现主题色指示条
  - 操作按钮渐显 (opacity: 0 -> 1)

#### 3.4.2 列表项悬停 (任务列表、帖子列表等)
- **前置条件**: 当用户浏览列表时
- **触发器**: 如果鼠标悬停在列表项上
- **响应**: 系统应当:
  - 背景色变化 (bg-dark-50 -> bg-dark-100/50)
  - 左侧出现主题色指示条
  - 快捷操作按钮显示
  - 阴影轻微增加

### 3.5 按钮悬停效果

#### 3.5.1 主要按钮悬停
- **前置条件**: 当用户查看主要操作按钮时
- **触发器**: 如果鼠标悬停在主要按钮上
- **响应**: 系统应当:
  - 背景色变深 (如 primary-600 -> primary-700)
  - 轻微上浮 (translateY: -1px)
  - 阴影增加
  - 光标变为指针

#### 3.5.2 次要按钮/图标按钮悬停
- **前置条件**: 当用户查看次要按钮时
- **触发器**: 如果鼠标悬停在按钮上
- **响应**: 系统应当:
  - 背景色变为对应色系的 50/100 色阶
  - 图标颜色变为对应色系的 600/700 色阶
  - 轻微放大 (scale: 1.05)
  - 显示 Tooltip 提示功能

#### 3.5.3 危险操作按钮悬停
- **前置条件**: 当用户查看删除等危险操作按钮时
- **触发器**: 如果鼠标悬停在危险按钮上
- **响应**: 系统应当:
  - 背景色变为 red-50
  - 图标颜色变为 red-500
  - 显示确认提示

### 3.6 Tab 导航悬停效果

#### 3.6.1 页面 Tab 悬停
- **前置条件**: 当用户查看页面顶部 Tab 导航时
- **触发器**: 如果鼠标悬停在未激活的 Tab 上
- **响应**: 系统应当:
  - 文字颜色变深
  - 底部边框渐显 (border-transparent -> border-gray-300)
  - 背景色微变

#### 3.6.2 卡片内 Tab 悬停
- **前置条件**: 当用户查看卡片内 Tab 时
- **触发器**: 如果鼠标悬停在 Tab 上
- **响应**: 系统应当:
  - 背景色变为 gray-100
  - 圆角显示
  - 文字颜色加深

### 3.7 表单元素悬停效果

#### 3.7.1 输入框悬停
- **前置条件**: 当用户查看表单输入框时
- **触发器**: 如果鼠标悬停在输入框上
- **响应**: 系统应当:
  - 边框颜色变为主题色 300
  - 阴影轻微增加
  - 占位符颜色加深

#### 3.7.2 下拉选择框悬停
- **前置条件**: 当用户查看下拉选择框时
- **触发器**: 如果鼠标悬停在下拉框上
- **响应**: 系统应当:
  - 边框颜色变化
  - 下拉箭头颜色加深
  - 背景色轻微变化

### 3.8 链接和文字悬停效果

#### 3.8.1 文字链接悬停
- **前置条件**: 当用户查看文字链接时
- **触发器**: 如果鼠标悬停在链接上
- **响应**: 系统应当:
  - 文字颜色变为主题色
  - 显示下划线
  - 光标变为指针

#### 3.8.2 可点击文字悬停
- **前置条件**: 当用户查看可点击文字时
- **触发器**: 如果鼠标悬停在文字上
- **响应**: 系统应当:
  - 文字颜色加深
  - 背景色轻微变化
  - 显示操作提示

### 3.9 标签/徽章悬停效果

#### 3.9.1 分类标签悬停
- **前置条件**: 当用户查看分类标签时
- **触发器**: 如果鼠标悬停在标签上
- **响应**: 系统应当:
  - 背景色加深
  - 文字颜色变为对应主题色
  - 轻微放大 (scale: 1.02)
  - 光标变为指针

#### 3.9.2 状态徽章悬停
- **前置条件**: 当用户查看状态徽章时
- **触发器**: 如果鼠标悬停在徽章上
- **响应**: 系统应当:
  - 显示状态说明 Tooltip
  - 背景色轻微变化

### 3.10 头像/用户头像悬停效果

#### 3.10.1 用户头像悬停
- **前置条件**: 当用户查看头像时
- **触发器**: 如果鼠标悬停在头像上
- **响应**: 系统应当:
  - 轻微放大 (scale: 1.05)
  - 显示边框光环
  - 显示用户信息 Tooltip

## 4. 边缘情况与风险 (Edge Cases)

- **触摸设备**: 悬停效果在移动端不应影响点击操作，需要使用 @media (hover: hover) 媒体查询
- **动画性能**: 避免使用影响布局的属性 (width/height/margin)，优先使用 transform 和 opacity
- **可访问性**: 悬停效果不应是唯一的交互提示，需配合焦点状态 (focus-visible)
- **减少动画偏好**: 尊重用户的 prefers-reduced-motion 设置
- **快速移动**: 鼠标快速滑过时不应产生卡顿或闪烁
- **嵌套元素**: 父元素悬停时不应影响子元素的正常交互
- **禁用状态**: 禁用元素的悬停效果应当取消或减弱

## 5. 设计原则

- **一致性**: 所有悬停效果遵循统一的动画时长 (200ms) 和缓动函数 (ease-out)
- **克制**: 效果 subtle 不夸张，不干扰内容阅读
- **反馈明确**: 用户能清晰感知到"这是可交互的"
- **性能优先**: 使用 GPU 加速的 transform 属性
- **主题统一**: 使用系统主题色系，保持视觉一致性
- **渐进增强**: 基础功能不依赖悬停效果，悬停作为增强体验

## 6. 涉及模块清单

- [ ] Layout.tsx - 侧边栏导航
- [ ] Dashboard.tsx - 工作台数据卡片
- [ ] ProjectList.tsx - 项目列表
- [ ] ProjectDetail.tsx - 项目详情卡片
- [ ] TaskList.tsx / TaskTable.tsx - 任务列表
- [ ] WaterModule.tsx - 水漫金山 Tab 导航
- [ ] ForumTab.tsx - 论坛帖子列表
- [ ] ForumPostDetailPage.tsx - 帖子详情页
- [ ] FileManager.tsx - 文件列表
- [ ] SystemSettings.tsx - 系统设置页面
- [ ] ClientList.tsx / SupplierList.tsx - 相关方列表
- [ ] 全局按钮组件
- [ ] 全局卡片组件
- [ ] 全局输入框组件
