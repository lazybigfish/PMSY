# 任务甘特图视图需求规格说明书

## 1. 背景 (Context)
为任务中心提供甘特图视图，以时间轴形式展示任务计划时间、截止时间和进度，支持任务依赖关系可视化，提升项目进度管理的直观性。

## 2. 用户故事 (User Stories)
- 作为**项目经理**，我希望任务以甘特图形式展示，以便直观看到项目整体时间规划和进度。
- 作为**项目成员**，我希望能看到任务的时间范围和截止日期，以便合理安排工作。
- 作为**项目成员**，我希望甘特图能展示任务之间的依赖关系，以便了解任务阻塞情况。

## 3. 验收标准 (Acceptance Criteria - EARS)

### 3.1 基础展示
- **前置条件**: 用户进入任务中心页面
- **触发器**: 用户点击"甘特图视图"选项
- **响应**: 系统应当以甘特图形式展示任务，每个任务对应一行时间条

### 3.2 时间轴显示
- **前置条件**: 甘特图视图加载
- **触发器**: 用户查看甘特图
- **响应**:
  - X轴显示日期/周/月（根据时间范围自动调整）
  - 每个任务条显示：开始日期到截止日期的时间跨度
  - 任务条颜色根据状态区分：待办(灰)、进行中(蓝)、已完成(绿)、逾期(红)

### 3.3 任务信息
- **前置条件**: 任务条渲染
- **触发器**: 鼠标悬停在任务条上
- **响应**: 显示任务详情气泡，包含：
  - 任务标题
  - 开始日期、截止日期
  - 当前进度百分比
  - 优先级标签
  - 负责人

### 3.4 依赖关系显示
- **前置条件**: 任务存在前置任务
- **触发器**: 甘特图加载
- **响应**: 用箭头连接依赖任务，显示任务间的阻塞关系

### 3.5 今日标记
- **前置条件**: 甘特图渲染
- **触发器**: 当前日期在视图范围内
- **响应**: 显示垂直虚线标记"今天"位置

### 3.6 时间范围适配
- **前置条件**: 任务时间跨度较大
- **触发器**: 自动计算
- **响应**: 根据任务时间范围自动选择合适的视图粒度：
  - 1周内 → 按天显示
  - 1个月内 → 按周显示
  - 超过1个月 → 按月显示

### 3.7 视图切换
- **前置条件**: 用户切换不同项目
- **触发器**: 切换项目或筛选条件
- **响应**: 甘特图自动更新显示对应的任务

## 4. 边缘情况与风险

### 4.1 无日期任务
- 当任务没有设置开始日期或截止日期时，应当在甘特图中显示为"无计划"状态

### 4.2 时间冲突
- 多个任务时间重叠时，可以考虑纵向堆叠或并排显示

### 4.3 大量任务性能
- 当任务超过100个时，考虑使用虚拟滚动优化渲染性能

### 4.4 移动端适配
- 移动端屏幕宽度有限，考虑提供横屏提示或简化视图

### 4.5 权限限制
- 团队成员只能看到自己有权限的任务甘特图
