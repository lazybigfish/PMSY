# 任务看板视图需求规格说明书

## 1. 背景 (Context)
为任务中心提供可视化看板视图，支持按状态、优先级、负责人等维度进行列展示，并通过拖拽操作更新任务状态，提升任务管理的直观性和操作效率。

## 2. 用户故事 (User Stories)
- 作为**项目经理**，我希望任务以看板形式展示，以便直观看到团队成员的工作分布和项目整体进度。
- 作为**团队成员**，我希望能够通过拖拽任务卡片来更新任务状态，以便快速更新任务进度而无需进入详情页。
- 作为**项目成员**，我希望能够按不同维度（状态/优先级/负责人/模块）对看板进行分组，以便从不同角度查看任务分布情况。

## 3. 验收标准 (Acceptance Criteria - EARS)

### 3.1 基础功能
- **前置条件**: 用户进入任务中心页面
- **触发器**: 用户点击"看板视图"选项卡
- **响应**: 系统应当以看板形式展示当前项目的任务，按状态列（待办/进行中/已完成）分组显示

### 3.2 列配置
- **前置条件**: 看板视图加载完成
- **触发器**: 用户点击"配置列"按钮
- **响应**: 系统应当展示可配置的列选项，支持按以下维度分组：
  - 任务状态（待办/进行中/已完成/已暂停/已取消）
  - 优先级（低/中/高/紧急）
  - 负责人（项目成员）
  - 功能模块（项目模块）

### 3.3 拖拽更新状态
- **前置条件**: 用户拖动任务卡片
- **触发器**: 用户将任务卡片拖动到目标列
- **响应**:
  - 系统应当更新任务的status字段为目标列对应的值
  - 系统应当显示任务状态更新成功的提示
  - 系统应当同步更新其他视图（如列表视图）的任务状态

### 3.4 任务卡片展示
- **前置条件**: 任务卡片渲染
- **触发器**: 看板视图加载
- **响应**: 每个任务卡片应当显示：
  - 任务标题（最多显示2行，超出省略）
  - 优先级标签（颜色区分：红/黄/蓝/灰）
  - 截止日期（如有，显示在卡片右下角）
  - 负责人头像（如有，显示在卡片左下角）
  - 模块标签（如有，显示在卡片顶部）

### 3.5 任务快速操作
- **前置条件**: 用户悬停在任务卡片上
- **触发器**: 用户点击任务卡片上的快捷操作按钮
- **响应**: 系统应当支持以下快捷操作：
  - 点击标题 → 打开任务详情抽屉
  - 点击"指派"图标 → 弹出负责人选择器
  - 点击"编辑"图标 → 进入任务编辑页面

### 3.6 响应式布局
- **前置条件**: 用户在移动设备上访问
- **触发器**: 屏幕宽度小于768px
- **响应**: 系统应当切换为横向滚动模式，单列完整展示，支持手势滑动切换列

## 4. 边缘情况与风险

### 4.1 空状态处理
- 当某个列没有任务时，应当显示"暂无任务"占位提示
- 应当允许拖拽任务到空列

### 4.2 并发冲突
- 当多个用户同时拖拽同一任务时，后提交的更新应当覆盖前一个（最后写入胜出）
- 应当在任务卡片上显示最后更新时间戳

### 4.3 大量任务性能
- 当单列任务超过50个时，应当支持虚拟滚动
- 应当显示任务数量统计

### 4.4 权限限制
- 团队成员拖拽任务时，应当检查是否有该任务的更新权限
- 无权限时应当禁用拖拽并显示提示

### 4.5 数据一致性
- 看板状态更新后，其他视图（甘特图、列表）应当自动同步
- 状态变更应当记录到任务历史中
