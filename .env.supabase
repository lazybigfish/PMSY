# ==========================================
# 生产环境/服务器部署配置 (.env.supabase)
# ==========================================
#
# 【重要】此文件用于服务器生产环境部署，使用本地 Docker Supabase
# 如需本地开发配置，请使用 .env.example
#
# 使用说明：
# 1. 复制此文件为 .env: cp .env.supabase .env
# 2. 修改以下配置为你的实际值：
#    - API_EXTERNAL_URL: http://YOUR_SERVER_IP:8000
#    - SITE_URL: http://YOUR_SERVER_IP
#    - 所有密码（强烈建议修改）
# 3. 如需重新生成 JWT token，使用 generate-jwt.js 脚本
#    注意：新 token 必须使用此文件中的 JWT_SECRET 生成
#
# 环境区分：
# - 开发环境：使用云端 Supabase (https://pnvxlxvuqiikeuikowag.supabase.co)
# - 生产环境：使用本地 Docker Supabase (http://YOUR_SERVER_IP:8000)
#
# 部署前必读：
# - 确保已阅读 README-DEPLOY.md
# - 确保已执行部署检查清单
# - 确保前端使用 npm run build 构建（使用 .env.production）
#
# ==========================================

# ==========================================
# 基础配置（必须修改）
# ==========================================

# PostgreSQL 数据库密码
# 警告：生产环境必须使用强密码，不要与示例相同
POSTGRES_PASSWORD=Willyou@2026

POSTGRES_DB=postgres
POSTGRES_USER=postgres

# JWT 密钥（至少32位字符）
# 用于签名所有 JWT token，必须保密
# 警告：生产环境请使用强随机字符串，定期更换
JWT_SECRET=Pmsy2024-JWT-okkolo-ppopy-For-Production
JWT_EXPIRY=3600

# ==========================================
# Supabase API 密钥
# ==========================================
# 这些 token 是使用上面的 JWT_SECRET 生成的
# 如需重新生成，使用 generate-jwt.js 脚本
# 注意：token 必须与 JWT_SECRET 匹配，否则认证会失败

VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBtc3kiLCJyb2xlIjoiYW5vbiIsImlhdCI6MTc3MDg2MzY5NCwiZXhwIjoyMDg2MjIzNjk0fQ.4asR7SimAk1UwthtIo5LD22qee5hsGAoZqDcwoQaSCw
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBtc3kiLCJyb2xlIjoic2VydmljZV9yb2xlIiwiaWF0IjoxNzcwODYzNjk0LCJleHAiOjIwODYyMjM2OTR9.kcaiSbeQJljHw-KnBqKuPY_D9cASMt1MZVkCOROJ1AM

# ==========================================
# 外部访问 URL（必须修改为你的服务器 IP/域名）
# ==========================================

# 示例：API_EXTERNAL_URL=http://43.136.69.250:8000
# 示例：SITE_URL=http://43.136.69.250
API_EXTERNAL_URL=http://43.136.69.250:8000
SITE_URL=http://43.136.69.250
SUPABASE_PUBLIC_URL=http://43.136.69.250:8000
ADDITIONAL_REDIRECT_URLS=

# ==========================================
# Supabase Studio 管理界面配置
# ==========================================

DASHBOARD_USERNAME=admin
# 警告：生产环境必须修改此密码
DASHBOARD_PASSWORD=Willyou@2026
STUDIO_DEFAULT_ORGANIZATION=PMSY
STUDIO_DEFAULT_PROJECT=pmsy

# ==========================================
# PMSY 应用配置
# ==========================================

# Root 用户配置（用于系统初始化）
# 警告：生产环境必须修改此密码
ROOT_USER_EMAIL=admin
ROOT_USER_PASSWORD=Willyou@2026

# ==========================================
# 可选配置（根据需要修改）
# ==========================================

OPENAI_API_KEY=
OPENAI_ORG=
LOGFLARE_API_KEY=
LOGFLARE_URL=

# SMTP 邮件配置（可选）
SMTP_ADMIN_EMAIL=admin@example.com
SMTP_HOST=supabase-mail
SMTP_PORT=2500
SMTP_USER=fake_mail_user
SMTP_PASS=fake_mail_password
SMTP_SENDER_NAME=fake_sender

# 函数 JWT 验证
FUNCTIONS_VERIFY_JWT=true

# ==========================================
# 部署验证清单
# ==========================================
# 部署前请确认：
# [ ] 已修改所有默认密码
# [ ] 已修改 API_EXTERNAL_URL 为实际服务器 IP
# [ ] 已修改 SITE_URL 为实际服务器 IP
# [ ] 前端使用 npm run build 构建
# [ ] 构建文件包含正确的 Supabase URL
# [ ] 所有服务正常运行
# [ ] 用户创建 API 测试通过
# [ ] 登录功能测试通过
# ==========================================
