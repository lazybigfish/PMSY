## 问题诊断

发现两个关键错误导致登录失败：

### 1. supabase-auth 服务（主要原因）
- 错误：`ERROR: column "instance_id" does not exist (SQLSTATE 42703)`
- 原因：数据库迁移失败，auth schema 中的表结构不完整

### 2. supabase-realtime 服务
- 错误：`APP_NAME not available`
- 原因：缺少 APP_NAME 环境变量

## 修复步骤

### 步骤 1: 修复数据库 auth schema
需要清理并重新初始化 auth 相关的数据库表：
```bash
ssh ubuntu@43.136.69.250 "cd /opt/pmsy && sudo docker-compose exec -T db psql -U postgres -c 'DROP SCHEMA IF EXISTS auth CASCADE;'"
ssh ubuntu@43.136.69.250 "cd /opt/pmsy && sudo docker-compose exec -T db psql -U postgres -c 'CREATE SCHEMA auth;'"
```

### 步骤 2: 修复 realtime 环境变量
在 docker-compose.yml 中添加缺失的 APP_NAME 环境变量。

### 步骤 3: 重启服务
```bash
ssh ubuntu@43.136.69.250 "cd /opt/pmsy && sudo docker-compose restart auth realtime"
```

### 步骤 4: 验证修复
检查服务状态并测试登录功能。