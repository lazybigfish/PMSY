# PMSY 后端 API Dockerfile
# 使用本地已导入的镜像，避免联网拉取
FROM node:20-alpine

WORKDIR /app

# 复制 package 文件
COPY package*.json ./

# 安装依赖（包括 devDependencies 里的 tsx）
RUN npm ci

# 复制后端代码
COPY api ./api

# 暴露端口
EXPOSE 3001

# 使用 tsx 运行 TypeScript
CMD ["npx", "tsx", "api/server.ts"]
