# æ•°æ®åº“å·®å¼‚æ£€æŸ¥æŠ¥å‘Š

## æ£€æŸ¥æ—¶é—´
2026-02-11

## æœåŠ¡å™¨ç¯å¢ƒ (æœ¬åœ° Docker)
**è¡¨æ•°é‡**: 8 å¼ è¡¨

### å·²å­˜åœ¨çš„è¡¨
1. app_roles âœ…
2. notifications âœ…
3. profiles âœ…
4. project_members âœ…
5. projects âœ…
6. role_permissions âœ…
7. schema_migrations âœ…
8. tasks âœ…

### ç¼ºå¤±çš„è¡¨ (å…± 25 å¼ )

#### æ ¸å¿ƒåŠŸèƒ½è¡¨
| è¡¨å | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|--------|
| project_modules | é¡¹ç›®åŠŸèƒ½æ¨¡å— | ğŸ”´ é«˜ |
| milestone_templates | é‡Œç¨‹ç¢‘æ¨¡æ¿ | ğŸ”´ é«˜ |
| project_milestones | é¡¹ç›®é‡Œç¨‹ç¢‘å®ä¾‹ | ğŸ”´ é«˜ |
| milestone_tasks | é‡Œç¨‹ç¢‘ä»»åŠ¡ | ğŸ”´ é«˜ |
| task_assignees | ä»»åŠ¡å¤„ç†äºº | ğŸŸ¡ ä¸­ |

#### ä¾›åº”å•†ç®¡ç†
| è¡¨å | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|--------|
| suppliers | ä¾›åº”å•† | ğŸ”´ é«˜ |
| supplier_categories | ä¾›åº”å•†åˆ†ç±» | ğŸŸ¡ ä¸­ |
| supplier_evaluation_criteria | è¯„ä¼°æ ‡å‡† | ğŸŸ¡ ä¸­ |
| supplier_evaluations | è¯„ä¼°è®°å½• | ğŸŸ¡ ä¸­ |
| supplier_payment_plans | ä»˜æ¬¾è®¡åˆ’ | ğŸŸ¡ ä¸­ |
| payment_vouchers | ä»˜æ¬¾å‡­è¯ | ğŸŸ¡ ä¸­ |

#### é£é™©ç®¡ç†
| è¡¨å | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|--------|
| risks | é£é™© | ğŸŸ¡ ä¸­ |

#### æŠ¥å‘Šç®¡ç†
| è¡¨å | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|--------|
| reports | æŠ¥å‘Š | ğŸŸ¡ ä¸­ |
| report_templates | æŠ¥å‘Šæ¨¡æ¿ | ğŸŸ¡ ä¸­ |

#### AI é…ç½®
| è¡¨å | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|--------|
| ai_providers | AI æä¾›å•† | ğŸŸ¢ ä½ |
| ai_roles | AI è§’è‰² | ğŸŸ¢ ä½ |
| ai_analysis_results | AI åˆ†æç»“æœ | ğŸŸ¢ ä½ |

#### æ–‡ä»¶ç®¡ç†
| è¡¨å | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|--------|
| files | æ–‡ä»¶ | ğŸŸ¡ ä¸­ |
| file_relations | æ–‡ä»¶å…³è” | ğŸŸ¡ ä¸­ |

#### å®¢æˆ·ç®¡ç†
| è¡¨å | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|--------|
| clients | å®¢æˆ· | ğŸŸ¡ ä¸­ |
| client_contacts | å®¢æˆ·è”ç³»äºº | ğŸŸ¡ ä¸­ |

#### è®ºå›/æ°´åŒº
| è¡¨å | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|--------|
| forum_posts | è®ºå›å¸–å­ | ğŸŸ¢ ä½ |
| forum_replies | è®ºå›å›å¤ | ğŸŸ¢ ä½ |
| hot_news | çƒ­ç‚¹æ–°é—» | ğŸŸ¢ ä½ |

#### æ“ä½œæ—¥å¿—
| è¡¨å | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|--------|
| operation_logs | æ“ä½œæ—¥å¿— | ğŸŸ¢ ä½ |

#### ä»»åŠ¡è¿›åº¦
| è¡¨å | è¯´æ˜ | ä¼˜å…ˆçº§ |
|------|------|--------|
| task_progress_updates | ä»»åŠ¡è¿›åº¦æ›´æ–° | ğŸŸ¡ ä¸­ |

---

## ç¼ºå¤±çš„åˆå§‹åŒ–æ•°æ®

### 1. é‡Œç¨‹ç¢‘æ¨¡æ¿æ•°æ® (milestone_templates)
**çŠ¶æ€**: è¡¨ä¸å­˜åœ¨ï¼Œæ•°æ®ç¼ºå¤±
**å½±å“**: ç³»ç»Ÿé…ç½®ä¸­çš„é‡Œç¨‹ç¢‘æ¨¡æ¿ä¸ºç©º
**æ¥æºæ–‡ä»¶**: `20250210120000_populate_default_milestones.sql`

### 2. AI æä¾›å•†é…ç½® (ai_providers)
**çŠ¶æ€**: è¡¨ä¸å­˜åœ¨ï¼Œæ•°æ®ç¼ºå¤±
**å½±å“**: AI åˆ†æåŠŸèƒ½æ— æ³•ä½¿ç”¨

### 3. AI è§’è‰²é…ç½® (ai_roles)
**çŠ¶æ€**: è¡¨ä¸å­˜åœ¨ï¼Œæ•°æ®ç¼ºå¤±
**å½±å“**: AI åˆ†æåŠŸèƒ½æ— æ³•ä½¿ç”¨

### 4. æŠ¥å‘Šæ¨¡æ¿ (report_templates)
**çŠ¶æ€**: è¡¨ä¸å­˜åœ¨ï¼Œæ•°æ®ç¼ºå¤±
**å½±å“**: æ—¥æŠ¥/å‘¨æŠ¥åŠŸèƒ½æ— æ³•ä½¿ç”¨

---

## æ ¹å› åˆ†æ

### é—®é¢˜ 1: åˆå§‹åŒ–è„šæœ¬ä¸å®Œæ•´
æœåŠ¡å™¨éƒ¨ç½²æ—¶åªè¿è¡Œäº†éƒ¨åˆ†è¿ç§»è„šæœ¬ï¼š
- âœ… `20250209000000_init_schema.sql` - åˆ›å»ºäº†åŸºç¡€è¡¨
- âŒ å…¶ä»–è¿ç§»è„šæœ¬æœªè¿è¡Œ

### é—®é¢˜ 2: éƒ¨ç½²æµç¨‹ç¼ºé™·
`deploy/scripts/init-database-simple.sql` åªåŒ…å«åŸºç¡€è¡¨ç»“æ„ï¼Œç¼ºå°‘ï¼š
- é‡Œç¨‹ç¢‘æ¨¡æ¿è¡¨
- ä¾›åº”å•†ç›¸å…³è¡¨
- AI é…ç½®è¡¨
- æ–‡ä»¶ç®¡ç†è¡¨
- ç­‰ç­‰...

---

## ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ A: è¿è¡Œæ‰€æœ‰ç¼ºå¤±çš„è¿ç§»è„šæœ¬ï¼ˆæ¨èï¼‰

æŒ‰é¡ºåºè¿è¡Œä»¥ä¸‹è¿ç§»è„šæœ¬ï¼š

```bash
# 1. æ ¸å¿ƒåŠŸèƒ½è¡¨
supabase/migrations/20250209000000_init_schema.sql
supabase/migrations/20250210120000_populate_default_milestones.sql

# 2. ä¾›åº”å•†æ¨¡å—
supabase/migrations/20250209150000_enhance_supplier_module.sql
supabase/migrations/20250209160000_complete_supplier_module.sql
supabase/migrations/20250209143000_create_project_suppliers.sql
supabase/migrations/20260211000008_add_supplier_payment_plans.sql
supabase/migrations/20260211000010_fix_supplier_payment_plans.sql
supabase/migrations/20260211000011_check_and_fix_payment_plans.sql
supabase/migrations/20260211000009_add_payment_vouchers_bucket.sql

# 3. æ–‡ä»¶ç³»ç»Ÿ
supabase/migrations/20260211000004_add_file_system.sql
supabase/migrations/20260211000005_add_file_relations.sql
supabase/migrations/20260211000006_add_files_module_permissions.sql
supabase/migrations/20260211000019_create_task_attachments_bucket.sql
supabase/migrations/20260211000021_add_task_attachments_bucket_policies.sql

# 4. å®¢æˆ·ç®¡ç†
supabase/migrations/20260211000001_create_client_tables.sql

# 5. æ°´åŒº/è®ºå›
supabase/migrations/20260211000000_add_water_module.sql
supabase/migrations/20260211000001_fix_forum_rls.sql
supabase/migrations/20260210233000_hot_news_admin_config.sql

# 6. AI é…ç½®
supabase/migrations/20250209000004_mock_data.sql  # åŒ…å« AI é…ç½®

# 7. æ“ä½œæ—¥å¿—
supabase/migrations/20260211000002_add_operation_logs.sql

# 8. ä»»åŠ¡è¿›åº¦
supabase/migrations/20260211000018_add_task_progress_updates.sql
supabase/migrations/20260211000020_fix_task_progress_permissions.sql

# 9. å…¶ä»–ä¿®å¤å’Œå¢å¼º
supabase/migrations/20250209000001_add_task_details_and_notifications.sql
supabase/migrations/20250209000002_fix_task_assignees.sql
supabase/migrations/20250209000003_notification_triggers.sql
supabase/migrations/20250209120000_fix_milestones_init.sql
supabase/migrations/20250209130000_add_username_login.sql
supabase/migrations/20250209133000_fix_trigger_and_promote_root.sql
supabase/migrations/20250209140000_confirm_root_email.sql
supabase/migrations/20250209170000_enhance_task_detail.sql
supabase/migrations/20250210000000_add_is_custom_flag.sql
supabase/migrations/20250210100000_add_milestone_versioning.sql
supabase/migrations/20250210110000_fix_empty_versions.sql
supabase/migrations/20250210130000_fix_version_switching.sql
supabase/migrations/20250210140000_clean_test_data.sql
supabase/migrations/20250210150000_fix_null_owners.sql
supabase/migrations/20260210210000_strict_rls_policies.sql
supabase/migrations/20260210220000_fix_rls_visibility.sql
supabase/migrations/20260210230000_add_dashboard_features.sql
supabase/migrations/20260211000003_add_admin_policies.sql
supabase/migrations/20260211000007_update_role_permissions_modules.sql
supabase/migrations/20260211000012_fix_milestone_name.sql
supabase/migrations/20260211000013_drop_unused_columns.sql
supabase/migrations/20260211000014_add_milestone_task_completion_fields.sql
supabase/migrations/20260211000015_add_project_modules_progress.sql
supabase/migrations/20260211000016_add_reorder_milestones_function.sql
supabase/migrations/20260211000017_update_stakeholders_permissions.sql
```

### æ–¹æ¡ˆ B: åˆ›å»ºå®Œæ•´çš„åˆå§‹åŒ–è„šæœ¬

åˆ›å»ºä¸€ä¸ªæ–°çš„ `init-database-complete.sql`ï¼ŒåŒ…å«æ‰€æœ‰è¡¨ç»“æ„å’Œåˆå§‹æ•°æ®ã€‚

---

## å»ºè®®

1. **çŸ­æœŸä¿®å¤**: æŒ‰æ–¹æ¡ˆ A è¿è¡Œç¼ºå¤±çš„è¿ç§»è„šæœ¬
2. **é•¿æœŸæ”¹è¿›**: æ›´æ–° `deploy/scripts/init-database-simple.sql` ä¸ºå®Œæ•´ç‰ˆæœ¬
3. **é¢„é˜²æªæ–½**: æ›´æ–° `deploy/scripts/deploy.sh` è‡ªåŠ¨è¿è¡Œæ‰€æœ‰è¿ç§»è„šæœ¬

---

*æŠ¥å‘Šç”Ÿæˆæ—¶é—´: 2026-02-11*
