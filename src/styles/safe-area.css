/**
 * 安全区域适配样式
 * 用于适配 iPhone 刘海屏、灵动岛、Android 挖孔屏等
 */

/* CSS 变量定义 - 用于 JavaScript 读取 */
:root {
  --sat: env(safe-area-inset-top);
  --sab: env(safe-area-inset-bottom);
  --sal: env(safe-area-inset-left);
  --sar: env(safe-area-inset-right);
}

/* 顶部安全区域 */
.safe-area-top {
  padding-top: env(safe-area-inset-top);
}

/* 底部安全区域 */
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

/* 左侧安全区域 */
.safe-area-left {
  padding-left: env(safe-area-inset-left);
}

/* 右侧安全区域 */
.safe-area-right {
  padding-right: env(safe-area-inset-right);
}

/* 全方向安全区域 */
.safe-area-all {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* 水平方向安全区域 */
.safe-area-x {
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* 垂直方向安全区域 */
.safe-area-y {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
}

/* 固定顶部导航栏适配 */
.fixed-top-nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  padding-top: env(safe-area-inset-top);
  z-index: 50;
}

/* 固定底部导航栏适配 */
.fixed-bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  padding-bottom: env(safe-area-inset-bottom);
  z-index: 50;
}

/* 底部固定按钮组适配 */
.fixed-bottom-actions {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  padding-bottom: max(env(safe-area-inset-bottom), 16px);
  padding-left: max(env(safe-area-inset-left), 16px);
  padding-right: max(env(safe-area-inset-right), 16px);
  background: linear-gradient(to top, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.9) 100%);
  backdrop-filter: blur(10px);
  z-index: 40;
}

/* 内容区域适配（考虑顶部和底部固定元素） */
.content-safe-area {
  padding-top: calc(env(safe-area-inset-top) + 64px); /* 64px 为导航栏高度 */
  padding-bottom: calc(env(safe-area-inset-bottom) + 80px); /* 80px 为底部导航高度 */
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* 模态框/弹窗安全区域 */
.modal-safe-area {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: max(env(safe-area-inset-left), 16px);
  padding-right: max(env(safe-area-inset-right), 16px);
}

/* 底部弹出层安全区域 */
.bottom-sheet-safe {
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* 横屏模式下的安全区域 */
@media (orientation: landscape) {
  .landscape-safe-area {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

/* iPhone X 及以上机型特定适配 */
@supports (padding-top: env(safe-area-inset-top)) {
  .iphone-x-adapt {
    /* iPhone X 及以上机型的特定样式 */
  }
}

/* 非刘海屏设备的后备样式 */
@supports not (padding-top: env(safe-area-inset-top)) {
  .safe-area-top {
    padding-top: 20px;
  }

  .safe-area-bottom {
    padding-bottom: 20px;
  }

  .fixed-bottom-nav {
    padding-bottom: 16px;
  }

  .content-safe-area {
    padding-top: 64px;
    padding-bottom: 80px;
  }
}

/* 深色模式下的底部固定元素 */
@media (prefers-color-scheme: dark) {
  .fixed-bottom-actions {
    background: linear-gradient(to top, rgba(15, 23, 42, 1) 0%, rgba(15, 23, 42, 0.9) 100%);
  }
}

/* 打印模式隐藏安全区域 */
@media print {
  .safe-area-top,
  .safe-area-bottom,
  .safe-area-left,
  .safe-area-right,
  .safe-area-all,
  .safe-area-x,
  .safe-area-y {
    padding: 0 !important;
  }
}
